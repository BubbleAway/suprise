<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Happy Birthday</title>
<style>
html, body {
  margin: 0;
  padding: 0;
  width: 100%;
  height: 100%;
  font-family: Arial, sans-serif;
  overflow: hidden;
  background: #333;
}

/* CODE GATE */
#codeGate {
  position: fixed; inset:0; display:flex; flex-direction:column; align-items:center; justify-content:center;
  background: linear-gradient(135deg,#000,#2a2a2a);
  background-size:400% 400%;
  animation: gradientMoveCode 15s linear infinite;
  color:white; z-index:10000;
}
#codeGate h2 { font-size:2rem; margin-bottom:15px; text-align:center; }
#codeInput { padding:12px 15px; font-size:1.2rem; border-radius:8px; border:none; text-align:center; width:150px; max-width:80vw; }
#submitCode { margin-top:15px; padding:12px 20px; font-size:1.2rem; border-radius:10px; border:none; cursor:pointer; background:#8a00ff; color:white; }
#codeError { margin-top:10px; font-size:0.9rem; min-height:18px; color:#ff4c4c; text-align:center; }

/* SECTIONS */
.section {
  position:absolute; inset:0; display:none;
  flex-direction:column; align-items:center; justify-content:center;
  color:white; text-align:center; padding:20px;
  background-size:400% 400%;
  animation: gradientMoveSection 20s linear infinite;
}
.section.active { display:flex; }

#home, #section1, #section2, #section3 { background:linear-gradient(135deg,#330066,#b300cc); }
#section4 { background:linear-gradient(135deg,#001f4d,#0033cc); }

.title { font-size:clamp(2rem,8vw,5rem); margin-bottom:40px; text-align:center; }
.nav-buttons {
  display:grid;
  grid-template-columns:repeat(2, auto);
  gap:20px;
}
.nav-buttons button, .backHome {
  padding:16px 20px; font-size:1.2rem; border-radius:12px; border:none; cursor:pointer;
  background:#9c028d; color:white; min-width:140px; text-align:center;
}
.backHome { margin-top:30px; background:#7a00ff; }

/* 50 BUTTON GAME */
#counter { font-size:clamp(1.5rem,5vw,3rem); margin-bottom:20px; text-align:center; }
#moveBtn {
  position:absolute; padding:16px 30px; font-size:1.2rem;
  border-radius:12px; border:none; background:#002fa7; color:white; cursor:pointer;
}

/* REVISIT BUTTON (starts hidden) */
#revisitBtn {
  display:none;
  margin-top:25px;
  padding:16px 28px;
  font-size:1.1rem;
  border-radius:12px;
  border:none;
  background:#ffd43b;
  color:#000;
  cursor:pointer;
  font-weight:600;
}

/* POPUP ‚Äî solid */
#popup {
  position:fixed; top:50%; left:50%; transform:translate(-50%,-50%);
  display:none;
  background:#0000ff;
  color:white; text-align:center;
  padding:30px 40px;
  z-index:20000;
  font-size:1rem;
  border-radius:15px;
  box-shadow:0 0 20px rgba(0,0,0,0.5);
  max-width:90%;
  animation: popupGradient 10s ease infinite;
}

@keyframes popupGradient {
  0%   { background:#0000ff; }
  33%  { background:#9b00ff; }
  66%  { background:#000000; }
  100% { background:#0000ff; }
}

#popupClose {
  position:absolute; top:10px; right:14px;
  font-size:1.5rem; cursor:pointer; color:white;
}

/* SLIME CONFETTI */
.slime-img { position:absolute; width:32px; height:32px; pointer-events:none; image-rendering:pixelated; }

@keyframes fall { from{transform:translateY(-40px) rotate(0deg); opacity:1;} to{transform:translateY(110vh) rotate(360deg); opacity:0;} }
@keyframes gradientMoveCode { 0%{background-position:0% 0%} 50%{background-position:0% 100%} 100%{background-position:0% 0%} }
@keyframes gradientMoveSection { 0%{background-position:0% 0%} 50%{background-position:100% 100%} 100%{background-position:0% 0%} }

/* CONFETTI BURST */
.confetti-piece {
  position: fixed;
  width: 10px;
  height: 18px;
  border-radius: 2px;
  pointer-events: none;
  z-index: 9999;
}

@keyframes burst {
  from { transform: translate(0,0) rotate(0deg); opacity:1; }
  to { transform: translate(var(--dx), var(--dy)) rotate(720deg); opacity:0; }
}

/* Mobile */
@media (max-width: 600px) {
  .nav-buttons { grid-template-columns:1fr; gap:15px; }
  .nav-buttons button, .backHome { font-size:1rem; padding:14px 16px; min-width:100px; }
}
</style>
</head>

<body>

<div id="codeGate">
  <h2>Please Enter Code</h2>
  <input id="codeInput" type="password" maxlength="6" placeholder="Enter code">
  <button id="submitCode">Submit</button>
  <div id="codeError"></div>
</div>

<div id="home" class="section">
  <div class="title">üéâ Happy Birthday! üéâ</div>
  <div class="nav-buttons">
    <button onclick="showSection('section1')">‚úâÔ∏è Short Message</button>
    <button onclick="showSection('section2')">üéÇ Short Facts</button>
    <button onclick="showSection('section3')">üîÆ Birthday Fortune</button>
    <button onclick="showSection('section4')">‚ùå Save for last</button>
  </div>
</div>

<div id="section1" class="section">
  <h1>‚úâÔ∏è Short Message</h1>
  <p>I didn't want to make it too easy to see the message,<br>so it's hidden at the end.</p>
  <button class="backHome" onclick="showSection('home')">Back to Home</button>
</div>

<div id="section2" class="section">
  <h1>üéÇ Fun Birthday Facts</h1>
  <p>‚Ä¢ You can now buy and consume alcohol (maybe share some :D)<br>‚Ä¢ You can adopt children (useful for your plans ig)<br>‚Ä¢ You can rent cars (some companies require 21+)</p>
  <button class="backHome" onclick="showSection('home')">Back to Home</button>
</div>

<div id="section3" class="section">
  <h1>üîÆ Birthday Fortune</h1>
  <p>You are now 18.<br>That‚Äôs basically the fortune.<br>And I can call you a pedophile now :D</p>
  <button class="backHome" onclick="showSection('home')">Back to Home</button>
</div>

<!-- SECTION 4 -->
<div id="section4" class="section">
  <h1 id="counter">0 / 50</h1>
  <p>Press the button 50 times for the surprise</p>
  <button id="moveBtn">Press Me</button>

  <!-- appears AFTER completing game -->
  <button id="revisitBtn">Revisit Final Message</button>

  <button class="backHome" onclick="showSection('home')">Back to Home</button>
</div>

<div id="popup">
  <span id="popupClose">√ó</span>
  <p>I wanted to thank you for all the time we spend together. Even though I am very bad in Valorant it was still fun playing it with you.</p>
  <p>I also wanted to thank you for all the times you were there to text with me when I needed it.</p>
  <p>Because I didn't know how to wish you a great birthday otherwise, I decided to write this code to wish you a happy birthday!</p> 
  <p>So I am now writing this whilst you are singing "I want it that way" because I felt like it was a bit short,</p>
  <p>I just want to add that I really enjoy spending time with you and it's just nice actually spending time with someone who also likes</p>
  <p>It so it's not just one sided, thanks a lot for all the time and help</p>
  <p>‚ù§Ô∏è I hope you have a great birthday üéâ</p>
</div>

<script>
// ===== CODE GATE =====
const SECRET = "311225";
const codeGate = document.getElementById("codeGate");
const codeInput = document.getElementById("codeInput");
const codeError = document.getElementById("codeError");
const sections = document.querySelectorAll(".section");

function showSection(id){
  sections.forEach(s => s.classList.remove("active"));
  document.getElementById(id).classList.add("active");
}

document.getElementById("submitCode").onclick = () => {
  if(codeInput.value === SECRET){
    codeGate.style.display = "none";
    showSection("home");
    burstConfetti();
  } else {
    codeError.textContent = "Incorrect code. Try again.";
    codeInput.value = "";
  }
};

// ===== 50 BUTTON GAME =====
const btn = document.getElementById("moveBtn");
const counter = document.getElementById("counter");
const revisitBtn = document.getElementById("revisitBtn");
let count = 0;
let firstPress = true;

btn.onclick = () => {
  if(firstPress){
    btn.style.left = `calc(50% - ${btn.offsetWidth/2}px)`;
    btn.style.top = `calc(50% - ${btn.offsetHeight/2}px)`;
    firstPress = false;
    return;
  }

  count++;
  counter.textContent = count + " / 50";

  if(count < 50){
    const maxX = window.innerWidth - btn.offsetWidth - 10;
    const maxY = window.innerHeight - btn.offsetHeight - 10;
    btn.style.left = Math.random()*maxX + "px";
    btn.style.top = Math.random()*maxY + "px";
  } else {
    btn.style.display = "none";
    revisitBtn.style.display = "inline-block";
    popup.style.display = "block";
  }
};

// ===== POPUP =====
const popup = document.getElementById("popup");
document.getElementById("popupClose").onclick = () => popup.style.display = "none";
revisitBtn.onclick = () => popup.style.display = "block";

// ===== SLIME CONFETTI (rain) =====
const TOTAL_SLIMES = 43;
function slimeIcon(){ return `assets/slime_icons/slime${Math.floor(Math.random()*TOTAL_SLIMES+1)}.png`; }
const fallingConfetti = document.createElement("div");
fallingConfetti.style.position="fixed";
fallingConfetti.style.inset="0";
fallingConfetti.style.pointerEvents="none";
fallingConfetti.style.zIndex="1";
document.body.appendChild(fallingConfetti);

setInterval(()=>{
  if(fallingConfetti.style.display==="none") return;
  for(let i=0;i<2;i++){
    const img=document.createElement("img");
    img.src = slimeIcon();
    img.className = "slime-img";
    img.style.left = Math.random()*window.innerWidth+"px";
    img.style.top = "-40px";
    img.style.animation = `fall ${3+Math.random()*3}s linear forwards`;
    fallingConfetti.appendChild(img);
    setTimeout(()=>img.remove(),7000);
  }
},60);

// ===== CONFETTI BURST =====
function burstConfetti() {
  const colors = ["#ff4d4d","#ffd633","#66ff66","#66b3ff","#ff66ff","#ff944d"];
  const cx = window.innerWidth/2;
  const cy = window.innerHeight/2;

  for(let i=0;i<250;i++){
    const piece = document.createElement("div");
    piece.className = "confetti-piece";
    piece.style.left = cx + "px";
    piece.style.top  = cy + "px";
    piece.style.background = colors[Math.floor(Math.random()*colors.length)];

    const angle = Math.random()*Math.PI*2;
    const dist = 200 + Math.random()*600;
    piece.style.setProperty("--dx", Math.cos(angle)*dist + "px");
    piece.style.setProperty("--dy", Math.sin(angle)*dist + "px");

    const dur = 1200 + Math.random()*900;
    piece.style.animation = `burst ${dur}ms ease-out forwards`;

    document.body.appendChild(piece);
    setTimeout(()=>piece.remove(), dur+200);
  }
}
</script>
</body>
</html>
